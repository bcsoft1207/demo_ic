/*lib*/
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(e){return e&&(0===e.offsetWidth||0===e.offsetHeight||!1===e.open)}function i(e){for(var i=[],n=e.parentNode;t(n);)i.push(n),n=n.parentNode;return i}function n(e,t){function n(e){void 0!==e.open&&(e.open=!e.open)}var o=i(e),s=o.length,a=[],r=e[t];if(s){for(var l=0;s>l;l++)a[l]=o[l].style.cssText,o[l].style.display="block",o[l].style.height="0",o[l].style.overflow="hidden",o[l].style.visibility="hidden",n(o[l]);r=e[t];for(var d=0;s>d;d++)o[d].style.cssText=a[d],n(o[d])}return r}function o(t,i){if(this.$window=e(window),this.$document=e(document),this.$element=e(t),this.options=e.extend({},l,i),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&r)return!1;this.identifier="js-"+s+"-"+a++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=e('<div class="'+this.options.fillClass+'" />'),this.$handle=e('<div class="'+this.options.handleClass+'" />'),this.$range=e('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=e.proxy(this.handleDown,this),this.handleMove=e.proxy(this.handleMove,this),this.handleEnd=e.proxy(this.handleEnd,this),this.init();var n=this;this.$window.on("resize."+this.identifier,function(e,t){return t=t||100,function(){if(!e.debouncing){var i=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,i),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.debouncing=!1},t),e.lastReturnVal}}(function(){!function(e,t){var i=Array.prototype.slice.call(arguments,2);setTimeout(function(){return e.apply(null,i)},t)}(function(){n.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(e,t){if(!t||t.origin!==n.identifier){var i=e.target.value,o=n.getPositionFromValue(i);n.setPosition(o)}})}var s="rangeslider",a=0,r=function(){var e=document.createElement("input");return e.setAttribute("type","range"),"text"!==e.type}(),l={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};o.prototype.init=function(){this.update(!0),this.$element[0].value=this.value,this.onInit&&"function"==typeof this.onInit&&this.onInit()},o.prototype.update=function(e){(e=e||!1)&&(this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1)),this.handleWidth=n(this.$handle[0],"offsetWidth"),this.rangeWidth=n(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},o.prototype.handleDown=function(e){if(e.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var t=this.getRelativePosition(e),i=this.$range[0].getBoundingClientRect().left,n=this.getPositionFromNode(this.$handle[0])-i;this.setPosition(t-this.grabX),t>=n&&t<n+this.handleWidth&&(this.grabX=t-n)}},o.prototype.handleMove=function(e){e.preventDefault();var t=this.getRelativePosition(e);this.setPosition(t-this.grabX)},o.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},o.prototype.cap=function(e,t,i){return t>e?t:e>i?i:e},o.prototype.setPosition=function(e){var t,i,n=void 0===window.vibV2Slide||null==window.vibV2Slide?0:window.vibV2Slide;t=this.getValueFromPosition(this.cap(e,0,this.maxHandleX)),i=this.getPositionFromValue(t),this.$fill[0].style.width=i-n+this.grabX+"px",this.$handle[0].style.left=i+"px",this.setValue(t),this.position=i,this.value=t,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(i,t)},o.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},o.prototype.getRelativePosition=function(e){var t=this.$range[0].getBoundingClientRect().left,i=0;return void 0!==e.pageX?i=e.pageX:void 0!==e.originalEvent.clientX?i=e.originalEvent.clientX:e.originalEvent.touches&&e.originalEvent.touches[0]&&void 0!==e.originalEvent.touches[0].clientX?i=e.originalEvent.touches[0].clientX:e.currentPoint&&void 0!==e.currentPoint.x&&(i=e.currentPoint.x),i-t},o.prototype.getPositionFromValue=function(e){return(e-this.min)/(this.max-this.min)*this.maxHandleX},o.prototype.getValueFromPosition=function(e){var t,i;return t=e/(this.maxHandleX||1),i=this.step*Math.round(t*(this.max-this.min)/this.step)+this.min,Number(i.toFixed(this.toFixed))},o.prototype.setValue=function(e){e!==this.value&&this.$element.val(e).trigger("keyup",{origin:this.identifier})},o.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+s),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},e.fn[s]=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this),a=n.data("plugin_"+s);a||n.data("plugin_"+s,a=new o(this,t)),"string"==typeof t&&a[t].apply(a,i)})}});var dojo=dojo||{};dojo.date=dojo.date||{},dojo.date.getDaysInMonth=function(e){var t=e.getMonth();return 1==t&&dojo.date.isLeapYear(e)?29:[31,28,31,30,31,30,31,31,30,31,30,31][t]},dojo.date.isLeapYear=function(e){var t=e.getFullYear();return!(t%400&&(t%4||!(t%100)))},dojo.date.getTimezoneName=function(e){var t,i=e.toString(),n="",o=i.indexOf("(");if(o>-1)n=i.substring(++o,i.indexOf(")"));else{var s=/([A-Z\/]+) \d{4}$/;(t=i.match(s))?n=t[1]:(s=/ ([A-Z\/]+)$/,(t=(i=e.toLocaleString()).match(s))&&(n=t[1]))}return"AM"==n||"PM"==n?"":n},dojo.date.compare=function(e,t,i){return e=new Date(Number(e)),t=new Date(Number(t||new Date)),"undefined"!==i&&("date"==i?(e.setHours(0,0,0,0),t.setHours(0,0,0,0)):"time"==i&&(e.setFullYear(0,0,0),t.setFullYear(0,0,0))),e>t?1:t>e?-1:0},dojo.date.add=function(e,t,i){var n=new Date(Number(e)),o=!1,s="Date";switch(t){case"day":break;case"weekday":var a,r,l=i%5;l?(a=l,r=parseInt(i/5)):(a=i>0?5:-5,r=i>0?(i-5)/5:(i+5)/5);var d=e.getDay(),c=0;6==d&&i>0?c=1:0==d&&0>i&&(c=-1);var u=d+a;(0==u||6==u)&&(c=i>0?2:-2),i=7*r+a+c;break;case"year":s="FullYear",o=!0;break;case"week":i*=7;break;case"quarter":i*=3;case"month":o=!0,s="Month";break;case"hour":case"minute":case"second":case"millisecond":s="UTC"+t.charAt(0).toUpperCase()+t.substring(1)+"s"}return s&&n["set"+s](n["get"+s]()+i),o&&n.getDate()<e.getDate()&&n.setDate(0),n},dojo.date.difference=function(e,t,i){i=i||"day";var n=(t=t||new Date).getFullYear()-e.getFullYear(),o=1;switch(i){case"quarter":var s=e.getMonth(),a=t.getMonth(),r=Math.floor(s/3)+1,l=Math.floor(a/3)+1;o=(l+=4*n)-r;break;case"weekday":var d=Math.round(dojo.date.difference(e,t,"day")),c=parseInt(dojo.date.difference(e,t,"week")),u=d%7;if(0==u)d=5*c;else{var h=0,g=e.getDay(),f=t.getDay();c=parseInt(d/7),u=d%7;var p=new Date(e);p.setDate(p.getDate()+7*c);var v=p.getDay();if(d>0)switch(!0){case 6==g:h=-1;break;case 0==g:h=0;break;case 6==f:h=-1;break;case 0==f:h=-2;break;case v+u>5:h=-2}else if(0>d)switch(!0){case 6==g:h=0;break;case 0==g:h=1;break;case 6==f:h=2;break;case 0==f:h=1;break;case 0>v+u:h=2}d+=h,d-=2*c}o=d;break;case"year":o=n;break;case"month":o=t.getMonth()-e.getMonth()+12*n;break;case"week":o=parseInt(dojo.date.difference(e,t,"day")/7);break;case"day":o/=24;case"hour":o/=60;case"minute":o/=60;case"second":o/=1e3;case"millisecond":o*=t.getTime()-e.getTime()}return Math.round(o)},function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};e.fn.bxSlider=function(o){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(o)}),this;var s={},a=this;t.el=this;var r=null,l=null,d=!0,c=!1,u=e(window).width(),h=e(window).height(),g=function(){s.settings=e.extend({},n,o),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=a.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp="vertical"==s.settings.mode?"top":"left",s.usingCSS=s.settings.useCSS&&"fade"!=s.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return s.cssPrefix=t[i].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),"vertical"==s.settings.mode&&(s.settings.maxSlides=s.settings.minSlides),a.data("origStyle",a.attr("style")),a.children(s.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),f()},f=function(){a.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),s.viewport=a.parent(),s.loader=e('<div class="bx-loading" />'),s.viewport.prepend(s.loader),a.css({width:"horizontal"==s.settings.mode?100*s.children.length+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?a.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing"),w(),s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:x()}),s.settings.pager||s.viewport.parent().css({margin:"0 auto 0px"}),s.children.css({float:"horizontal"==s.settings.mode?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",S()),"horizontal"==s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),"vertical"==s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),"fade"==s.settings.mode&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"})),s.controls.el=e('<div class="bx-controls" />'),s.settings.captions&&E(),s.active.last=s.settings.startSlide==b()-1,s.settings.video&&a.fitVids();var t=s.children.eq(s.settings.startSlide);"all"==s.settings.preloadImages&&(t=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.pager&&k(),s.settings.controls&&B(),s.settings.auto&&s.settings.autoControls&&I(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),p(t,v)},p=function(t,i){var n=t.find("img, iframe").length;if(0!=n){var o=0;t.find("img, iframe").each(function(){e(this).one("load",function(){++o==n&&i()}).each(function(){this.complete&&e(this).load()})})}else i()},v=function(){if(s.settings.infiniteLoop&&"fade"!=s.settings.mode&&!s.settings.ticker){var t="vertical"==s.settings.mode?s.settings.minSlides:s.settings.maxSlides,i=s.children.slice(0,t).clone().addClass("bx-clone"),n=s.children.slice(-t).clone().addClass("bx-clone");a.append(i).prepend(n)}s.loader.remove(),y(),"vertical"==s.settings.mode&&(s.settings.adaptiveHeight=!0),s.viewport.height(m()),a.redrawSlider(),s.settings.onSliderLoad(s.active.index),s.initialized=!0,s.settings.responsive&&e(window).bind("resize",N),s.settings.auto&&s.settings.autoStart&&W(),s.settings.ticker&&F(),s.settings.pager&&A(s.settings.startSlide),s.settings.controls&&H(),s.settings.touchEnabled&&!s.settings.ticker&&j()},m=function(){var t=0,n=e();if("vertical"==s.settings.mode||s.settings.adaptiveHeight)if(s.carousel){var o=1==s.settings.moveSlides?s.active.index:s.active.index*C();for(n=s.children.eq(o),i=1;i<=s.settings.maxSlides-1;i++)n=n.add(s.children.eq(o+i>=s.children.length?i-1:o+i))}else n=s.children.eq(s.active.index);else n=s.children;return"vertical"==s.settings.mode?(n.each(function(){t+=e(this).outerHeight()}),s.settings.slideMargin>0&&(t+=s.settings.slideMargin*(s.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),t},x=function(){var e="100%";return s.settings.slideWidth>0&&(e="horizontal"==s.settings.mode?s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:s.settings.slideWidth),e},S=function(){var e=s.settings.slideWidth,t=s.viewport.width();return 0==s.settings.slideWidth||s.settings.slideWidth>t&&!s.carousel||"vertical"==s.settings.mode?e=t:s.settings.maxSlides>1&&"horizontal"==s.settings.mode&&(t>s.maxThreshold||t<s.minThreshold&&(e=(t-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides)),e},w=function(){var e=1;if("horizontal"==s.settings.mode&&s.settings.slideWidth>0)if(s.viewport.width()<s.minThreshold)e=s.settings.minSlides;else if(s.viewport.width()>s.maxThreshold)e=s.settings.maxSlides;else{var t=s.children.first().width();e=Math.floor(s.viewport.width()/t)}else"vertical"==s.settings.mode&&(e=s.settings.minSlides);return e},b=function(){var e=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)e=s.children.length/C();else for(var t=0,i=0;t<s.children.length;)++e,t=i+w(),i+=s.settings.moveSlides<=w()?s.settings.moveSlides:w();else e=Math.ceil(s.children.length/w());return e},C=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=w()?s.settings.moveSlides:w()},y=function(){if(s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop){if("horizontal"==s.settings.mode){var e=s.children.last(),t=e.position();_(-(t.left-(s.viewport.width()-e.width())),"reset",0)}else if("vertical"==s.settings.mode){var i=s.children.length-s.settings.minSlides;t=s.children.eq(i).position();_(-t.top,"reset",0)}}else{t=s.children.eq(s.active.index*C()).position();s.active.index==b()-1&&(s.active.last=!0),null!=t&&("horizontal"==s.settings.mode?_(-t.left,"reset",0):"vertical"==s.settings.mode&&_(-t.top,"reset",0))}},_=function(e,t,i,n){if(s.usingCSS){var o="vertical"==s.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";a.css("-"+s.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==t?(a.css(s.animProp,o),a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),L()})):"reset"==t?a.css(s.animProp,o):"ticker"==t&&(a.css("-"+s.cssPrefix+"-transition-timing-function","linear"),a.css(s.animProp,o),a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),_(n.resetValue,"reset",0),q()}))}else{var r={};r[s.animProp]=e,"slide"==t?a.animate(r,i,s.settings.easing,function(){L()}):"reset"==t?a.css(s.animProp,e):"ticker"==t&&a.animate(r,speed,"linear",function(){_(n.resetValue,"reset",0),q()})}},T=function(){for(var t="",i=b(),n=0;i>n;n++){var o="";s.settings.buildPager&&e.isFunction(s.settings.buildPager)?(o=s.settings.buildPager(n),s.pagerEl.addClass("bx-custom-pager")):(o=n+1,s.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+n+'" class="bx-pager-link">'+o+"</a></div>"}s.pagerEl.html(t)},k=function(){s.settings.pagerCustom?s.pagerEl=e(s.settings.pagerCustom):(s.pagerEl=e('<div class="bx-pager" />'),s.settings.pagerSelector?e(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),T()),s.pagerEl.on("click","a",R)},B=function(){s.controls.next=e('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=e('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click",M),s.controls.prev.bind("click",P),s.settings.nextSelector&&e(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&e(s.settings.prevSelector).append(s.controls.prev),s.settings.nextSelector||s.settings.prevSelector||(s.controls.directionEl=e('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},I=function(){s.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=e('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",D),s.controls.autoEl.on("click",".bx-stop",O),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?e(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),z(s.settings.autoStart?"stop":"start")},E=function(){s.children.each(function(){var t=e(this).find("img:first").attr("title");null!=t&&(""+t).length&&e(this).append('<div class="bx-caption"><span>'+t+"</span></div>")})},M=function(e){s.settings.auto&&a.stopAuto(),a.goToNextSlide(),e.preventDefault()},P=function(e){s.settings.auto&&a.stopAuto(),a.goToPrevSlide(),e.preventDefault()},D=function(e){a.startAuto(),e.preventDefault()},O=function(e){a.stopAuto(),e.preventDefault()},R=function(t){s.settings.auto&&a.stopAuto();var i=e(t.currentTarget),n=parseInt(i.attr("data-slide-index"));n!=s.active.index&&a.goToSlide(n),t.preventDefault()},A=function(t){var i=s.children.length;return"short"==s.settings.pagerType?(s.settings.maxSlides>1&&(i=Math.ceil(s.children.length/s.settings.maxSlides)),void s.pagerEl.html(t+1+s.settings.pagerShortSeparator+i)):(s.pagerEl.find("a").removeClass("active"),void s.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}))},L=function(){if(s.settings.infiniteLoop){var e="";0==s.active.index?e=s.children.eq(0).position():s.active.index==b()-1&&s.carousel?e=s.children.eq((b()-1)*C()).position():s.active.index==s.children.length-1&&(e=s.children.eq(s.children.length-1).position()),e&&("horizontal"==s.settings.mode?_(-e.left,"reset",0):"vertical"==s.settings.mode&&_(-e.top,"reset",0))}s.working=!1,s.settings.onSlideAfter(s.children.eq(s.active.index),s.oldIndex,s.active.index)},z=function(e){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[e]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},H=function(){1==b()?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(0==s.active.index?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index==b()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},W=function(){s.settings.autoDelay>0?setTimeout(a.startAuto,s.settings.autoDelay):a.startAuto(),s.settings.autoHover&&a.hover(function(){s.interval&&(a.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(a.startAuto(!0),s.autoPaused=null)})},F=function(){var t=0;if("next"==s.settings.autoDirection)a.append(s.children.clone().addClass("bx-clone"));else{a.prepend(s.children.clone().addClass("bx-clone"));var i=s.children.first().position();t="horizontal"==s.settings.mode?-i.left:-i.top}_(t,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&!s.usingCSS&&s.viewport.hover(function(){a.stop()},function(){var t=0;s.children.each(function(){t+="horizontal"==s.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var i=s.settings.speed/t,n="horizontal"==s.settings.mode?"left":"top",o=i*(t-Math.abs(parseInt(a.css(n))));q(o)}),q()},q=function(e){speed=e||s.settings.speed;var t={left:0,top:0},i={left:0,top:0};"next"==s.settings.autoDirection?t=a.find(".bx-clone").first().position():i=s.children.first().position();var n="horizontal"==s.settings.mode?-t.left:-t.top,o="horizontal"==s.settings.mode?-i.left:-i.top;_(n,"ticker",speed,{resetValue:o})},j=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart",V)},V=function(e){if(s.working)e.preventDefault();else{s.touch.originalPos=a.position();var t=e.originalEvent;s.touch.start.x=t.changedTouches[0].pageX,s.touch.start.y=t.changedTouches[0].pageY,s.viewport.bind("touchmove",$),s.viewport.bind("touchend",X)}},$=function(e){var t=e.originalEvent,i=Math.abs(t.changedTouches[0].pageX-s.touch.start.x),n=Math.abs(t.changedTouches[0].pageY-s.touch.start.y);if(3*i>n&&!c&&!0!==l&&!0!==r&&s.settings.preventDefaultSwipeX?(l=!0,r=!1,console.log("turned on horizontal flag"),d=!1):3*n>i&&!c&&!0!==r&&!0!==l&&s.settings.preventDefaultSwipeY&&(r=!0,l=!1,console.log("turned on vertical flag"),d=!1),"fade"!=s.settings.mode&&s.settings.oneToOneTouch){var o=0;if("horizontal"==s.settings.mode){var a=t.changedTouches[0].pageX-s.touch.start.x;o=s.touch.originalPos.left+a}else{a=t.changedTouches[0].pageY-s.touch.start.y;o=s.touch.originalPos.top+a}!d||l||r||(c=!0,_(o,"reset",0),e.preventDefault())}},X=function(e){s.viewport.unbind("touchmove",$);var t=e.originalEvent,i=0;if(s.touch.end.x=t.changedTouches[0].pageX,s.touch.end.y=t.changedTouches[0].pageY,"fade"==s.settings.mode){(n=Math.abs(s.touch.start.x-s.touch.end.x))>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto())}else{var n=0;"horizontal"==s.settings.mode?(n=s.touch.end.x-s.touch.start.x,i=s.touch.originalPos.left):(n=s.touch.end.y-s.touch.start.y,i=s.touch.originalPos.top),!s.settings.infiniteLoop&&(0==s.active.index&&n>0||s.active.last&&0>n)?_(i,"reset",200):Math.abs(n)>=s.settings.swipeThreshold?(0>n?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto()):_(i,"reset",200)}r=!1,l=!1,d=!0,c=!1,s.viewport.unbind("touchend",X)},N=function(){var t=e(window).width(),i=e(window).height();(u!=t||h!=i)&&(u=t,h=i,a.redrawSlider(),s.settings.onSliderResize.call(a,s.active.index))};return a.goToSlide=function(t,i){if(!s.working&&s.active.index!=t)if(s.working=!0,s.oldIndex=s.active.index,s.active.index=0>t?b()-1:t>=b()?0:t,s.settings.onSlideBefore(s.children.eq(s.active.index),s.oldIndex,s.active.index),"next"==i?s.settings.onSlideNext(s.children.eq(s.active.index),s.oldIndex,s.active.index):"prev"==i&&s.settings.onSlidePrev(s.children.eq(s.active.index),s.oldIndex,s.active.index),s.active.last=s.active.index>=b()-1,s.settings.pager&&A(s.active.index),s.settings.controls&&H(),"fade"==s.settings.mode)s.settings.adaptiveHeight&&s.viewport.height()!=m()&&s.viewport.animate({height:m()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){e(this).css("zIndex",s.settings.slideZIndex),L()});else{s.settings.adaptiveHeight&&s.viewport.height()!=m()&&s.viewport.animate({height:m()},s.settings.adaptiveHeightSpeed);var n=0,o={left:0,top:0};if(!s.settings.infiniteLoop&&s.carousel&&s.active.last)if("horizontal"==s.settings.mode){o=(l=s.children.eq(s.children.length-1)).position(),n=s.viewport.width()-l.outerWidth()}else{var r=s.children.length-s.settings.minSlides;o=s.children.eq(r).position()}else if(s.carousel&&s.active.last&&"prev"==i){var l,d=1==s.settings.moveSlides?s.settings.maxSlides-C():(b()-1)*C()-(s.children.length-s.settings.maxSlides);o=(l=a.children(".bx-clone").eq(d)).position()}else if("next"==i&&0==s.active.index)o=a.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1;else if(t>=0){var c=t*C();o=s.children.eq(c).position()}if(void 0!==o){var u="horizontal"==s.settings.mode?-(o.left-n):-o.top;_(u,"slide",s.settings.speed)}}},a.goToNextSlide=function(){if(s.settings.infiniteLoop||!s.active.last){var e=parseInt(s.active.index)+1;a.goToSlide(e,"next")}},a.goToPrevSlide=function(){if(s.settings.infiniteLoop||0!=s.active.index){var e=parseInt(s.active.index)-1;a.goToSlide(e,"prev")}},a.startAuto=function(e){s.interval||(s.interval=setInterval(function(){"next"==s.settings.autoDirection?a.goToNextSlide():a.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&1!=e&&z("stop"))},a.stopAuto=function(e){s.interval&&(clearInterval(s.interval),s.interval=null,s.settings.autoControls&&1!=e&&z("start"))},a.getCurrentSlide=function(){return s.active.index},a.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},a.getSlideCount=function(){return s.children.length},a.redrawSlider=function(){s.children.add(a.find(".bx-clone")).outerWidth(S()),s.viewport.css("height",m()),s.settings.ticker||y(),s.active.last&&(s.active.index=b()-1),s.active.index>=b()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(T(),A(s.active.index))},a.destroySlider=function(){s.initialized&&(s.initialized=!1,e(".bx-clone",this).remove(),s.children.each(function(){null!=e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),null!=e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&s.pagerEl.remove(),e(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&e(window).unbind("resize",N))},a.reloadSlider=function(e){null!=e&&(o=e),a.destroySlider(),g()},g(),this}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,r=l.call(arguments,1),d=0,u=0,h=0,g=0,f=0,p=0;if((t=e.event.fix(a)).type="mousewheel","detail"in a&&(h=-1*a.detail),"wheelDelta"in a&&(h=a.wheelDelta),"wheelDeltaY"in a&&(h=a.wheelDeltaY),"wheelDeltaX"in a&&(u=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(u=-1*h,h=0),d=0===h?u:h,"deltaY"in a&&(d=h=-1*a.deltaY),"deltaX"in a&&(u=a.deltaX,0===h&&(d=-1*u)),0!==h||0!==u){if(1===a.deltaMode){var v=e.data(this,"mousewheel-line-height");d*=v,h*=v,u*=v}else if(2===a.deltaMode){var m=e.data(this,"mousewheel-page-height");d*=m,h*=m,u*=m}if(g=Math.max(Math.abs(h),Math.abs(u)),(!s||s>g)&&(s=g,n(a,g)&&(s/=40)),n(a,g)&&(d/=40,u/=40,h/=40),d=Math[d>=1?"floor":"ceil"](d/s),u=Math[u>=1?"floor":"ceil"](u/s),h=Math[h>=1?"floor":"ceil"](h/s),c.settings.normalizeOffset&&this.getBoundingClientRect){var x=this.getBoundingClientRect();f=t.clientX-x.left,p=t.clientY-x.top}return t.deltaX=u,t.deltaY=h,t.deltaFactor=s,t.offsetX=f,t.offsetY=p,t.deltaMode=0,r.unshift(t,d,u,h),o&&clearTimeout(o),o=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,r)}}function i(){s=null}function n(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var o,s,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var d=a.length;d;)e.event.fixHooks[a[--d]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=r.length;i;)this.addEventListener(r[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=r.length;i;)this.removeEventListener(r[--i],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),n=i["offsetParent"in e.fn?"offsetParent":"parent"]();return n.length||(n=e("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){var t,i,n;t="function"==typeof define&&define.amd,i="undefined"!=typeof module&&module.exports,n="https:"==document.location.protocol?"https:":"http:",t||(i?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+n+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.12/jquery.mousewheel.min.js%3E%3C/script%3E"))),function(){var t,i="mCustomScrollbar",n="mCS",o=".mCustomScrollbar",s={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:!0,autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},a=0,r={},l=window.attachEvent&&!window.addEventListener?1:0,d=!1,c=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],u={init:function(t){var t=e.extend(!0,{},s,t),i=h.call(this);if(t.live){var l=t.liveSelector||this.selector||o,d=e(l);if("off"===t.live)return void f(l);r[l]=setTimeout(function(){d.mCustomScrollbar(t),"once"===t.live&&d.length&&f(l)},500)}else f(l);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":p(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=v(t.scrollButtons.scrollType),g(t),e(i).each(function(){var i=e(this);if(!i.data(n)){i.data(n,{idx:++a,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:i.css("direction"),cbOffsets:null,trigger:null});var o=i.data(n),s=o.opt,r=i.data("mcs-axis"),l=i.data("mcs-scrollbar-position"),d=i.data("mcs-theme");r&&(s.axis=r),l&&(s.scrollbarPosition=l),d&&(s.theme=d,g(s)),m.call(this),e("#mCSB_"+o.idx+"_container img:not(."+c[2]+")").addClass(c[2]),u.update.call(null,i)}})},update:function(t,i){var o=t||h.call(this);return e(o).each(function(){var t=e(this);if(t.data(n)){var o=t.data(n),s=o.opt,a=e("#mCSB_"+o.idx+"_container"),r=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")];if(!a.length)return;o.tweenRunning&&N(t),t.hasClass(c[3])&&t.removeClass(c[3]),t.hasClass(c[4])&&t.removeClass(c[4]),b.call(this),S.call(this),"y"===s.axis||s.advanced.autoExpandHorizontalScroll||a.css("width",x(a.children())),o.overflowed=T.call(this),E.call(this),s.autoDraggerLength&&C.call(this),y.call(this),B.call(this);var l=[Math.abs(a[0].offsetTop),Math.abs(a[0].offsetLeft)];"x"!==s.axis&&(o.overflowed[0]?r[0].height()>r[0].parent().height()?k.call(this):(Y(t,l[0].toString(),{dir:"y",dur:0,overwrite:"none"}),o.contentReset.y=null):(k.call(this),"y"===s.axis?I.call(this):"yx"===s.axis&&o.overflowed[1]&&Y(t,l[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==s.axis&&(o.overflowed[1]?r[1].width()>r[1].parent().width()?k.call(this):(Y(t,l[1].toString(),{dir:"x",dur:0,overwrite:"none"}),o.contentReset.x=null):(k.call(this),"x"===s.axis?I.call(this):"yx"===s.axis&&o.overflowed[0]&&Y(t,l[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),i&&o&&(2===i&&s.callbacks.onImageLoad&&"function"==typeof s.callbacks.onImageLoad?s.callbacks.onImageLoad.call(this):3===i&&s.callbacks.onSelectorChange&&"function"==typeof s.callbacks.onSelectorChange?s.callbacks.onSelectorChange.call(this):s.callbacks.onUpdate&&"function"==typeof s.callbacks.onUpdate&&s.callbacks.onUpdate.call(this)),X.call(this)}})},scrollTo:function(t,i){if(void 0!==t&&null!=t){var o=h.call(this);return e(o).each(function(){var o=e(this);if(o.data(n)){var s=o.data(n),a=s.opt,r={trigger:"external",scrollInertia:a.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=e.extend(!0,{},r,i),d=V.call(this,t),c=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;d[0]=$.call(this,d[0],"y"),d[1]=$.call(this,d[1],"x"),l.moveDragger&&(d[0]*=s.scrollRatio.y,d[1]*=s.scrollRatio.x),l.dur=c,setTimeout(function(){null!==d[0]&&void 0!==d[0]&&"x"!==a.axis&&s.overflowed[0]&&(l.dir="y",l.overwrite="all",Y(o,d[0].toString(),l)),null!==d[1]&&void 0!==d[1]&&"y"!==a.axis&&s.overflowed[1]&&(l.dir="x",l.overwrite="none",Y(o,d[1].toString(),l))},l.timeout)}})}},stop:function(){var t=h.call(this);return e(t).each(function(){var t=e(this);t.data(n)&&N(t)})},disable:function(t){var i=h.call(this);return e(i).each(function(){var i=e(this);i.data(n)&&(i.data(n),X.call(this,"remove"),I.call(this),t&&k.call(this),E.call(this,!0),i.addClass(c[3]))})},destroy:function(){var t=h.call(this);return e(t).each(function(){var o=e(this);if(o.data(n)){var s=o.data(n),a=s.opt,r=e("#mCSB_"+s.idx),l=e("#mCSB_"+s.idx+"_container"),d=e(".mCSB_"+s.idx+"_scrollbar");a.live&&f(a.liveSelector||e(t).selector),X.call(this,"remove"),I.call(this),k.call(this),o.removeData(n),Z(this,"mcs"),d.remove(),l.find("img."+c[2]).removeClass(c[2]),r.replaceWith(l.contents()),o.removeClass(i+" _"+n+"_"+s.idx+" "+c[6]+" "+c[7]+" "+c[5]+" "+c[3]).addClass(c[4])}})}},h=function(){return"object"!=typeof e(this)||e(this).length<1?o:this},g=function(t){t.autoDraggerLength=!(e.inArray(t.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"])>-1)&&t.autoDraggerLength,t.autoExpandScrollbar=!(e.inArray(t.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"])>-1)&&t.autoExpandScrollbar,t.scrollButtons.enable=!(e.inArray(t.theme,["minimal","minimal-dark"])>-1)&&t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,["minimal","minimal-dark"])>-1||t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,["minimal","minimal-dark"])>-1?"outside":t.scrollbarPosition},f=function(e){r[e]&&(clearTimeout(r[e]),Z(r,e))},p=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},v=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},m=function(){var t=e(this),o=t.data(n),s=o.opt,a=s.autoExpandScrollbar?" "+c[1]+"_expand":"",r=["<div id='mCSB_"+o.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+o.idx+"_scrollbar mCS-"+s.theme+" mCSB_scrollTools_vertical"+a+"'><div class='"+c[12]+"'><div id='mCSB_"+o.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+o.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+o.idx+"_scrollbar mCS-"+s.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='"+c[12]+"'><div id='mCSB_"+o.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===s.axis?"mCSB_vertical_horizontal":"x"===s.axis?"mCSB_horizontal":"mCSB_vertical",d="yx"===s.axis?r[0]+r[1]:"x"===s.axis?r[1]:r[0],u="yx"===s.axis?"<div id='mCSB_"+o.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",h=s.autoHideScrollbar?" "+c[6]:"",g="x"!==s.axis&&"rtl"===o.langDir?" "+c[7]:"";s.setWidth&&t.css("width",s.setWidth),s.setHeight&&t.css("height",s.setHeight),s.setLeft="y"!==s.axis&&"rtl"===o.langDir?"989999px":s.setLeft,t.addClass(i+" _"+n+"_"+o.idx+h+g).wrapInner("<div id='mCSB_"+o.idx+"' class='mCustomScrollBox mCS-"+s.theme+" "+l+"'><div id='mCSB_"+o.idx+"_container' class='mCSB_container' style='position:relative; top:"+s.setTop+"; left:"+s.setLeft+";' dir="+o.langDir+" /></div>");var f=e("#mCSB_"+o.idx),p=e("#mCSB_"+o.idx+"_container");"y"===s.axis||s.advanced.autoExpandHorizontalScroll||p.css("width",x(p.children())),"outside"===s.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),f.addClass("mCSB_outside").after(d)):(f.addClass("mCSB_inside").append(d),p.wrap(u)),w.call(this);var v=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")];v[0].css("min-height",v[0].height()),v[1].css("min-width",v[1].width())},x=function(t){return Math.max.apply(Math,t.map(function(){return e(this).outerWidth(!0)}).get())},S=function(){var t=e(this),i=t.data(n),o=i.opt,s=e("#mCSB_"+i.idx+"_container");o.advanced.autoExpandHorizontalScroll&&"y"!==o.axis&&s.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(s[0].getBoundingClientRect().right+.4)-Math.floor(s[0].getBoundingClientRect().left),position:"relative"}).unwrap()},w=function(){var t=e(this),i=t.data(n),o=i.opt,s=e(".mCSB_"+i.idx+"_scrollbar:first"),a=ee(o.scrollButtons.tabindex)?"tabindex='"+o.scrollButtons.tabindex+"'":"",r=["<a href='#' class='"+c[13]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+c[14]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+c[15]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+c[16]+"' oncontextmenu='return false;' "+a+" />"],l=["x"===o.axis?r[2]:r[0],"x"===o.axis?r[3]:r[1],r[2],r[3]];o.scrollButtons.enable&&s.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])},b=function(){var t=e(this),i=t.data(n),o=e("#mCSB_"+i.idx),s=t.css("max-height")||"none",a=-1!==s.indexOf("%"),r=t.css("box-sizing");if("none"!==s){var l=a?t.parent().height()*parseInt(s)/100:parseInt(s);"border-box"===r&&(l-=t.innerHeight()-t.height()+(t.outerHeight()-t.innerHeight())),o.css("max-height",Math.round(l))}},C=function(){var t=e(this),i=t.data(n),o=e("#mCSB_"+i.idx),s=e("#mCSB_"+i.idx+"_container"),a=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")],r=[o.height()/s.outerHeight(!1),o.width()/s.outerWidth(!1)],d=[parseInt(a[0].css("min-height")),Math.round(r[0]*a[0].parent().height()),parseInt(a[1].css("min-width")),Math.round(r[1]*a[1].parent().width())],c=l&&d[1]<d[0]?d[0]:d[1],u=l&&d[3]<d[2]?d[2]:d[3];a[0].css({height:c,"max-height":a[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":d[0]+"px"}),a[1].css({width:u,"max-width":a[1].parent().width()-10})},y=function(){var t=e(this),i=t.data(n),o=e("#mCSB_"+i.idx),s=e("#mCSB_"+i.idx+"_container"),a=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")],r=[s.outerHeight(!1)-o.height(),s.outerWidth(!1)-o.width()],l=[r[0]/(a[0].parent().height()-a[0].height()),r[1]/(a[1].parent().width()-a[1].width())];i.scrollRatio={y:l[0],x:l[1]}},_=function(e,t,i){var n=i?c[0]+"_expanded":"",o=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(c[0]+" "+n),o.toggleClass(c[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(c[0]),o.removeClass(c[1])):(e.addClass(c[0]),o.addClass(c[1])))},T=function(){var t=e(this),i=t.data(n),o=e("#mCSB_"+i.idx),s=e("#mCSB_"+i.idx+"_container"),a=null==i.overflowed?s.height():s.outerHeight(!1),r=null==i.overflowed?s.width():s.outerWidth(!1);return[a>o.height(),r>o.width()]},k=function(){var t=e(this),i=t.data(n),o=i.opt,s=e("#mCSB_"+i.idx),a=e("#mCSB_"+i.idx+"_container"),r=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")];if(N(t),("x"!==o.axis&&!i.overflowed[0]||"y"===o.axis&&i.overflowed[0])&&(r[0].add(a).css("top",0),Y(t,"_resetY")),"y"!==o.axis&&!i.overflowed[1]||"x"===o.axis&&i.overflowed[1]){var l=dx=0;"rtl"===i.langDir&&(l=s.width()-a.outerWidth(!1),dx=Math.abs(l/i.scrollRatio.x)),a.css("left",l),r[1].css("left",dx),Y(t,"_resetX")}},B=function(){var t,i=e(this),o=i.data(n),s=o.opt;o.bindEvents||(P.call(this),s.contentTouchScroll&&D.call(this),O.call(this),s.mouseWheel.enable&&function n(){t=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(t),R.call(i[0])):n()},100)}(),z.call(this),W.call(this),s.advanced.autoScrollOnFocus&&H.call(this),s.scrollButtons.enable&&F.call(this),s.keyboard.enable&&q.call(this),o.bindEvents=!0)},I=function(){var t=e(this),i=t.data(n),o=i.opt,s=n+"_"+i.idx,a=".mCSB_"+i.idx+"_scrollbar",r=e("#mCSB_"+i.idx+",#mCSB_"+i.idx+"_container,#mCSB_"+i.idx+"_container_wrapper,"+a+" ."+c[12]+",#mCSB_"+i.idx+"_dragger_vertical,#mCSB_"+i.idx+"_dragger_horizontal,"+a+">a"),l=e("#mCSB_"+i.idx+"_container");o.advanced.releaseDraggableSelectors&&r.add(e(o.advanced.releaseDraggableSelectors)),i.bindEvents&&(e(document).unbind("."+s),r.each(function(){e(this).unbind("."+s)}),clearTimeout(t[0]._focusTimeout),Z(t[0],"_focusTimeout"),clearTimeout(i.sequential.step),Z(i.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),Z(l[0],"onCompleteTimeout"),i.bindEvents=!1)},E=function(t){var i=e(this),o=i.data(n),s=o.opt,a=e("#mCSB_"+o.idx+"_container_wrapper"),r=a.length?a:e("#mCSB_"+o.idx+"_container"),l=[e("#mCSB_"+o.idx+"_scrollbar_vertical"),e("#mCSB_"+o.idx+"_scrollbar_horizontal")],d=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==s.axis&&(o.overflowed[0]&&!t?(l[0].add(d[0]).add(l[0].children("a")).css("display","block"),r.removeClass(c[8]+" "+c[10])):(s.alwaysShowScrollbar?(2!==s.alwaysShowScrollbar&&d[0].css("display","none"),r.removeClass(c[10])):(l[0].css("display","none"),r.addClass(c[10])),r.addClass(c[8]))),"y"!==s.axis&&(o.overflowed[1]&&!t?(l[1].add(d[1]).add(l[1].children("a")).css("display","block"),r.removeClass(c[9]+" "+c[11])):(s.alwaysShowScrollbar?(2!==s.alwaysShowScrollbar&&d[1].css("display","none"),r.removeClass(c[11])):(l[1].css("display","none"),r.addClass(c[11])),r.addClass(c[9]))),o.overflowed[0]||o.overflowed[1]?i.removeClass(c[5]):i.addClass(c[5])},M=function(e){var t=e.type;switch(t){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return e.target.ownerDocument!==document?[e.originalEvent.screenY,e.originalEvent.screenX,!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[i.screenY,i.screenX,n>1]:[i.pageY,i.pageX,n>1];default:return[e.pageY,e.pageX,!1]}},P=function(){function t(e){var t=f.find("iframe");if(t.length){var i=e?"auto":"none";t.css("pointer-events",i)}}function i(e,t,i,n){if(f[0].idleTimer=u.scrollInertia<233?250:0,o.attr("id")===g[1])var s="x",a=(o[0].offsetLeft-t+n)*c.scrollRatio.x;else var s="y",a=(o[0].offsetTop-e+i)*c.scrollRatio.y;Y(r,a.toString(),{dir:s,drag:!0})}var o,s,a,r=e(this),c=r.data(n),u=c.opt,h=n+"_"+c.idx,g=["mCSB_"+c.idx+"_dragger_vertical","mCSB_"+c.idx+"_dragger_horizontal"],f=e("#mCSB_"+c.idx+"_container"),p=e("#"+g[0]+",#"+g[1]),v=u.advanced.releaseDraggableSelectors?p.add(e(u.advanced.releaseDraggableSelectors)):p;p.bind("mousedown."+h+" touchstart."+h+" pointerdown."+h+" MSPointerDown."+h,function(i){if(i.stopImmediatePropagation(),i.preventDefault(),G(i)){d=!0,l&&(document.onselectstart=function(){return!1}),t(!1),N(r);var n=(o=e(this)).offset(),c=M(i)[0]-n.top,h=M(i)[1]-n.left,g=o.height()+n.top,f=o.width()+n.left;g>c&&c>0&&f>h&&h>0&&(s=c,a=h),_(o,"active",u.autoExpandScrollbar)}}).bind("touchmove."+h,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=o.offset(),n=M(e)[0]-t.top,r=M(e)[1]-t.left;i(s,a,n,r)}),e(document).bind("mousemove."+h+" pointermove."+h+" MSPointerMove."+h,function(e){if(o){var t=o.offset(),n=M(e)[0]-t.top,r=M(e)[1]-t.left;if(s===n)return;i(s,a,n,r)}}).add(v).bind("mouseup."+h+" touchend."+h+" pointerup."+h+" MSPointerUp."+h,function(e){o&&(_(o,"active",u.autoExpandScrollbar),o=null),d=!1,l&&(document.onselectstart=null),t(!0)})},D=function(){function i(e){if(!J(e)||d||M(e)[2])t=0;else{t=1,b=0,C=0,y.removeClass("mCS_touch_action");var i=I.offset();c=M(e)[0]-i.top,u=M(e)[1]-i.left,L=[M(e)[0],M(e)[1]]}}function o(e){if(J(e)&&!d&&!M(e)[2]&&(e.stopImmediatePropagation(),!C||b)){p=Q();var t=B.offset(),i=M(e)[0]-t.top,n=M(e)[1]-t.left,o="mcsLinearOut";if(P.push(i),D.push(n),L[2]=Math.abs(M(e)[0]-L[0]),L[3]=Math.abs(M(e)[1]-L[1]),_.overflowed[0])var s=E[0].parent().height()-E[0].height(),a=c-i>0&&i-c>-s*_.scrollRatio.y&&(2*L[3]<L[2]||"yx"===T.axis);if(_.overflowed[1])var r=E[1].parent().width()-E[1].width(),h=u-n>0&&n-u>-r*_.scrollRatio.x&&(2*L[2]<L[3]||"yx"===T.axis);a||h?(e.preventDefault(),b=1):(C=1,y.addClass("mCS_touch_action")),S="yx"===T.axis?[c-i,u-n]:"x"===T.axis?[null,u-n]:[c-i,null],I[0].idleTimer=250,_.overflowed[0]&&l(S[0],O,o,"y","all",!0),_.overflowed[1]&&l(S[1],O,o,"x",R,!0)}}function s(e){if(!J(e)||d||M(e)[2])t=0;else{t=1,e.stopImmediatePropagation(),N(y),f=Q();var i=B.offset();h=M(e)[0]-i.top,g=M(e)[1]-i.left,P=[],D=[]}}function a(e){if(J(e)&&!d&&!M(e)[2]){e.stopImmediatePropagation(),b=0,C=0,v=Q();var t=B.offset(),i=M(e)[0]-t.top,n=M(e)[1]-t.left;if(!(v-p>30)){var o="mcsEaseOut",s=2.5>(x=1e3/(v-f)),a=s?[P[P.length-2],D[D.length-2]]:[0,0];m=s?[i-a[0],n-a[1]]:[i-h,n-g];var c=[Math.abs(m[0]),Math.abs(m[1])];x=s?[Math.abs(m[0]/4),Math.abs(m[1]/4)]:[x,x];var u=[Math.abs(I[0].offsetTop)-m[0]*r(c[0]/x[0],x[0]),Math.abs(I[0].offsetLeft)-m[1]*r(c[1]/x[1],x[1])];S="yx"===T.axis?[u[0],u[1]]:"x"===T.axis?[null,u[1]]:[u[0],null],w=[4*c[0]+T.scrollInertia,4*c[1]+T.scrollInertia];var y=parseInt(T.contentTouchScroll)||0;S[0]=c[0]>y?S[0]:0,S[1]=c[1]>y?S[1]:0,_.overflowed[0]&&l(S[0],w[0],o,"y",R,!1),_.overflowed[1]&&l(S[1],w[1],o,"x",R,!1)}}}function r(e,t){var i=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?i[0]:i[3]:e>60?t>3?i[3]:i[2]:e>30?t>8?i[1]:t>6?i[0]:t>4?t:i[2]:t>8?t:i[3]}function l(e,t,i,n,o,s){e&&Y(y,e.toString(),{dur:t,scrollEasing:i,dir:n,overwrite:o,drag:s})}var c,u,h,g,f,p,v,m,x,S,w,b,C,y=e(this),_=y.data(n),T=_.opt,k=n+"_"+_.idx,B=e("#mCSB_"+_.idx),I=e("#mCSB_"+_.idx+"_container"),E=[e("#mCSB_"+_.idx+"_dragger_vertical"),e("#mCSB_"+_.idx+"_dragger_horizontal")],P=[],D=[],O=0,R="yx"===T.axis?"none":"all",L=[],z=I.find("iframe"),H=["touchstart."+k+" pointerdown."+k+" MSPointerDown."+k,"touchmove."+k+" pointermove."+k+" MSPointerMove."+k,"touchend."+k+" pointerup."+k+" MSPointerUp."+k];I.bind(H[0],function(e){i(e)}).bind(H[1],function(e){o(e)}),B.bind(H[0],function(e){s(e)}).bind(H[2],function(e){a(e)}),z.length&&z.each(function(){e(this).load(function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind(H[0],function(e){i(e),s(e)}).bind(H[1],function(e){o(e)}).bind(H[2],function(e){a(e)})})})},O=function(){function i(e,t,i){l.type=i&&o?"stepped":"stepless",l.scrollAmount=10,j(s,e,t,"mcsLinearOut",i?60:null)}var o,s=e(this),a=s.data(n),r=a.opt,l=a.sequential,c=n+"_"+a.idx,u=e("#mCSB_"+a.idx+"_container"),h=u.parent();u.bind("mousedown."+c,function(e){t||o||(o=1,d=!0)}).add(document).bind("mousemove."+c,function(e){if(!t&&o&&(window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&document.selection.createRange().text)){var n=u.offset(),s=M(e)[0]-n.top+u[0].offsetTop,d=M(e)[1]-n.left+u[0].offsetLeft;s>0&&s<h.height()&&d>0&&d<h.width()?l.step&&i("off",null,"stepped"):("x"!==r.axis&&a.overflowed[0]&&(0>s?i("on",38):s>h.height()&&i("on",40)),"y"!==r.axis&&a.overflowed[1]&&(0>d?i("on",37):d>h.width()&&i("on",39)))}}).bind("mouseup."+c,function(e){t||(o&&(o=0,i("off",null)),d=!1)})},R=function(){function t(t,n){if(N(i),!L(i,t.target)){var a="auto"!==s.mouseWheel.deltaFactor?parseInt(s.mouseWheel.deltaFactor):l&&t.deltaFactor<100?100:t.deltaFactor||100;if("x"===s.axis||"x"===s.mouseWheel.axis)var c="x",u=[Math.round(a*o.scrollRatio.x),parseInt(s.mouseWheel.scrollAmount)],h="auto"!==s.mouseWheel.scrollAmount?u[1]:u[0]>=r.width()?.9*r.width():u[0],g=Math.abs(e("#mCSB_"+o.idx+"_container")[0].offsetLeft),f=d[1][0].offsetLeft,p=d[1].parent().width()-d[1].width(),v=t.deltaX||t.deltaY||n;else var c="y",u=[Math.round(a*o.scrollRatio.y),parseInt(s.mouseWheel.scrollAmount)],h="auto"!==s.mouseWheel.scrollAmount?u[1]:u[0]>=r.height()?.9*r.height():u[0],g=Math.abs(e("#mCSB_"+o.idx+"_container")[0].offsetTop),f=d[0][0].offsetTop,p=d[0].parent().height()-d[0].height(),v=t.deltaY||n;"y"===c&&!o.overflowed[0]||"x"===c&&!o.overflowed[1]||((s.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(v=-v),s.mouseWheel.normalizeDelta&&(v=0>v?-1:1),(v>0&&0!==f||0>v&&f!==p||s.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),Y(i,(g-v*h).toString(),{dir:c}))}}if(e(this).data(n)){var i=e(this),o=i.data(n),s=o.opt,a=n+"_"+o.idx,r=e("#mCSB_"+o.idx),d=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],c=e("#mCSB_"+o.idx+"_container").find("iframe");c.length&&c.each(function(){e(this).load(function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+a,function(e,i){t(e,i)})})}),r.bind("mousewheel."+a,function(e,i){t(e,i)})}},A=function(e){var t=null;try{var i=e.contentDocument||e.contentWindow.document;t=i.body.innerHTML}catch(e){}return null!==t},L=function(t,i){var o=i.nodeName.toLowerCase(),s=t.data(n).opt.mouseWheel.disableOver;return e.inArray(o,s)>-1&&!(e.inArray(o,["select","textarea"])>-1&&!e(i).is(":focus"))},z=function(){var t=e(this),i=t.data(n),o=n+"_"+i.idx,s=e("#mCSB_"+i.idx+"_container"),a=s.parent(),r=e(".mCSB_"+i.idx+"_scrollbar ."+c[12]);r.bind("touchstart."+o+" pointerdown."+o+" MSPointerDown."+o,function(e){d=!0}).bind("touchend."+o+" pointerup."+o+" MSPointerUp."+o,function(e){d=!1}).bind("click."+o,function(n){if(e(n.target).hasClass(c[12])||e(n.target).hasClass("mCSB_draggerRail")){N(t);var o=e(this),r=o.find(".mCSB_dragger");if(o.parent(".mCSB_scrollTools_horizontal").length>0){if(!i.overflowed[1])return;var l="x",d=n.pageX>r.offset().left?-1:1,u=Math.abs(s[0].offsetLeft)-.9*d*a.width()}else{if(!i.overflowed[0])return;var l="y",d=n.pageY>r.offset().top?-1:1,u=Math.abs(s[0].offsetTop)-.9*d*a.height()}Y(t,u.toString(),{dir:l,scrollEasing:"mcsEaseInOut"})}})},H=function(){var t=e(this),i=t.data(n),o=i.opt,s=n+"_"+i.idx,a=e("#mCSB_"+i.idx+"_container"),r=a.parent();a.bind("focusin."+s,function(i){var n=e(document.activeElement),s=a.find(".mCustomScrollBox").length;n.is(o.advanced.autoScrollOnFocus)&&(N(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=s?17*s:0,t[0]._focusTimeout=setTimeout(function(){var e=[te(n)[0],te(n)[1]],i=[a[0].offsetTop,a[0].offsetLeft],s=[i[0]+e[0]>=0&&i[0]+e[0]<r.height()-n.outerHeight(!1),i[1]+e[1]>=0&&i[0]+e[1]<r.width()-n.outerWidth(!1)],l="yx"!==o.axis||s[0]||s[1]?"all":"none";"x"===o.axis||s[0]||Y(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:l,dur:0}),"y"===o.axis||s[1]||Y(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:l,dur:0})},t[0]._focusTimer))})},W=function(){var t=e(this),i=t.data(n),o=n+"_"+i.idx,s=e("#mCSB_"+i.idx+"_container").parent();s.bind("scroll."+o,function(t){(0!==s.scrollTop()||0!==s.scrollLeft())&&e(".mCSB_"+i.idx+"_scrollbar").css("visibility","hidden")})},F=function(){var t=e(this),i=t.data(n),o=i.opt,s=i.sequential,a=n+"_"+i.idx,r=".mCSB_"+i.idx+"_scrollbar",l=e(r+">a");l.bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a+" mouseup."+a+" touchend."+a+" pointerup."+a+" MSPointerUp."+a+" mouseout."+a+" pointerout."+a+" MSPointerOut."+a+" click."+a,function(n){function a(e,i){s.scrollAmount=o.snapAmount||o.scrollButtons.scrollAmount,j(t,e,i)}if(n.preventDefault(),G(n)){var r=e(this).attr("class");switch(s.type=o.scrollButtons.scrollType,n.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===s.type)return;d=!0,i.tweenRunning=!1,a("on",r);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===s.type)return;d=!1,s.dir&&a("off",r);break;case"click":if("stepped"!==s.type||i.tweenRunning)return;a("on",r)}}})},q=function(){function t(t){function n(e,t){a.type=s.keyboard.scrollType,a.scrollAmount=s.snapAmount||s.keyboard.scrollAmount,"stepped"===a.type&&o.tweenRunning||j(i,e,t)}switch(t.type){case"blur":o.tweenRunning&&a.dir&&n("off",null);break;case"keydown":case"keyup":var r=t.keyCode?t.keyCode:t.which,l="on";if("x"!==s.axis&&(38===r||40===r)||"y"!==s.axis&&(37===r||39===r)){if((38===r||40===r)&&!o.overflowed[0]||(37===r||39===r)&&!o.overflowed[1])return;"keyup"===t.type&&(l="off"),e(document.activeElement).is(u)||(t.preventDefault(),t.stopImmediatePropagation(),n(l,r))}else if(33===r||34===r){if((o.overflowed[0]||o.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){N(i);var h=34===r?-1:1;if("x"===s.axis||"yx"===s.axis&&o.overflowed[1]&&!o.overflowed[0])var g="x",f=Math.abs(d[0].offsetLeft)-.9*h*c.width();else var g="y",f=Math.abs(d[0].offsetTop)-.9*h*c.height();Y(i,f.toString(),{dir:g,scrollEasing:"mcsEaseInOut"})}}else if((35===r||36===r)&&!e(document.activeElement).is(u)&&((o.overflowed[0]||o.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===s.axis||"yx"===s.axis&&o.overflowed[1]&&!o.overflowed[0])var g="x",f=35===r?Math.abs(c.width()-d.outerWidth(!1)):0;else var g="y",f=35===r?Math.abs(c.height()-d.outerHeight(!1)):0;Y(i,f.toString(),{dir:g,scrollEasing:"mcsEaseInOut"})}}}var i=e(this),o=i.data(n),s=o.opt,a=o.sequential,r=n+"_"+o.idx,l=e("#mCSB_"+o.idx),d=e("#mCSB_"+o.idx+"_container"),c=d.parent(),u="input,textarea,select,datalist,keygen,[contenteditable='true']",h=d.find("iframe"),g=["blur."+r+" keydown."+r+" keyup."+r];h.length&&h.each(function(){e(this).load(function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind(g[0],function(e){t(e)})})}),l.attr("tabindex","0").bind(g[0],function(e){t(e)})},j=function(t,i,o,s,a){function r(e){var i="stepped"!==u.type,n=a||(e?i?f/1.5:p:1e3/60),o=e?i?7.5:40:2.5,d=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)],c=[l.scrollRatio.y>10?10:l.scrollRatio.y,l.scrollRatio.x>10?10:l.scrollRatio.x],g="x"===u.dir[0]?d[1]+u.dir[1]*c[1]*o:d[0]+u.dir[1]*c[0]*o,v="x"===u.dir[0]?d[1]+u.dir[1]*parseInt(u.scrollAmount):d[0]+u.dir[1]*parseInt(u.scrollAmount),m="auto"!==u.scrollAmount?v:g,x=s||(e?i?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),S=!!e;return e&&17>n&&(m="x"===u.dir[0]?d[1]:d[0]),Y(t,m.toString(),{dir:u.dir[0],scrollEasing:x,dur:n,onComplete:S}),e?void(u.dir=!1):(clearTimeout(u.step),void(u.step=setTimeout(function(){r()},n)))}var l=t.data(n),d=l.opt,u=l.sequential,h=e("#mCSB_"+l.idx+"_container"),g="stepped"===u.type,f=d.scrollInertia<26?26:d.scrollInertia,p=d.scrollInertia<1?17:d.scrollInertia;switch(i){case"on":if(u.dir=[o===c[16]||o===c[15]||39===o||37===o?"x":"y",o===c[13]||o===c[15]||38===o||37===o?-1:1],N(t),ee(o)&&"stepped"===u.type)return;r(g);break;case"off":clearTimeout(u.step),Z(u,"step"),N(t),(g||l.tweenRunning&&u.dir)&&r(!0)}},V=function(t){var i=e(this).data(n).opt,o=[];return"function"==typeof t&&(t=t()),t instanceof Array?o=t.length>1?[t[0],t[1]]:"x"===i.axis?[null,t[0]]:[t[0],null]:(o[0]=t.y?t.y:t.x||"x"===i.axis?null:t,o[1]=t.x?t.x:t.y||"y"===i.axis?null:t),"function"==typeof o[0]&&(o[0]=o[0]()),"function"==typeof o[1]&&(o[1]=o[1]()),o},$=function(t,i){if(null!=t&&void 0!==t){var o=e(this),s=o.data(n),a=s.opt,r=e("#mCSB_"+s.idx+"_container"),l=r.parent(),d=typeof t;i||(i="x"===a.axis?"x":"y");var c="x"===i?r.outerWidth(!1):r.outerHeight(!1),h="x"===i?r[0].offsetLeft:r[0].offsetTop,g="x"===i?"left":"top";switch(d){case"function":return t();case"object":var f=t.jquery?t:e(t);if(!f.length)return;return"x"===i?te(f)[1]:te(f)[0];case"string":case"number":if(ee(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(c*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(h-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var p=h+parseInt(t.split("+=")[1]);return p>=0?0:Math.abs(p)}if(-1!==t.indexOf("px")&&ee(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(l.height()-r.outerHeight(!1));if("right"===t)return Math.abs(l.width()-r.outerWidth(!1));if("first"===t||"last"===t){var f=r.find(":"+t);return"x"===i?te(f)[1]:te(f)[0]}return e(t).length?"x"===i?te(e(t))[1]:te(e(t))[0]:(r.css(g,t),void u.update.call(null,o[0]))}}},X=function(t){function i(){var e=0;return l.advanced.updateOnImageLoad&&(e=d.find("img").length),e}function o(){!0===l.advanced.updateOnSelectorChange&&(l.advanced.updateOnSelectorChange="*");var t=0,i=d.find(l.advanced.updateOnSelectorChange);return l.advanced.updateOnSelectorChange&&i.length>0&&i.each(function(){t+=e(this).height()+e(this).width()}),t}function s(e){clearTimeout(d[0].autoUpdate),u.update.call(null,a[0],e)}var a=e(this),r=a.data(n),l=r.opt,d=e("#mCSB_"+r.idx+"_container");if(t)return clearTimeout(d[0].autoUpdate),void Z(d[0],"autoUpdate");var h,g,f,p=d.parent(),v=[e("#mCSB_"+r.idx+"_scrollbar_vertical"),e("#mCSB_"+r.idx+"_scrollbar_horizontal")],m=function(){return[v[0].is(":visible")?v[0].outerHeight(!0):0,v[1].is(":visible")?v[1].outerWidth(!0):0]},x=o(),S=[d.outerHeight(!1),d.outerWidth(!1),p.height(),p.width(),m()[0],m()[1]],w=i();!function t(){return clearTimeout(d[0].autoUpdate),0===a.parents("html").length?void(a=null):void(d[0].autoUpdate=setTimeout(function(){return l.advanced.updateOnSelectorChange&&(h=o())!==x?(s(3),void(x=h)):(l.advanced.updateOnContentResize&&((g=[d.outerHeight(!1),d.outerWidth(!1),p.height(),p.width(),m()[0],m()[1]])[0]!==S[0]||g[1]!==S[1]||g[2]!==S[2]||g[3]!==S[3]||g[4]!==S[4]||g[5]!==S[5])&&(s(g[0]!==S[0]||g[1]!==S[1]),S=g),l.advanced.updateOnImageLoad&&(f=i())!==w&&(d.find("img").each(function(){!function(t){if(e(t).hasClass(c[2]))s();else{var i=new Image;i.onload=function(e,t){return function(){return t.apply(e,arguments)}}(i,function(){this.onload=null,e(t).addClass(c[2]),s(2)}),i.src=t.src}}(this)}),w=f),void((l.advanced.updateOnSelectorChange||l.advanced.updateOnContentResize||l.advanced.updateOnImageLoad)&&t()))},l.advanced.autoUpdateTimeout))}()},N=function(t){var i=t.data(n),o=e("#mCSB_"+i.idx+"_container,#mCSB_"+i.idx+"_container_wrapper,#mCSB_"+i.idx+"_dragger_vertical,#mCSB_"+i.idx+"_dragger_horizontal");o.each(function(){K.call(this)})},Y=function(t,i,o){function s(e){return r&&l.callbacks[e]&&"function"==typeof l.callbacks[e]}function a(){var e=[h[0].offsetTop,h[0].offsetLeft],i=[v[0].offsetTop,v[0].offsetLeft],n=[h.outerHeight(!1),h.outerWidth(!1)],s=[u.height(),u.width()];t[0].mcs={content:h,top:e[0],left:e[1],draggerTop:i[0],draggerLeft:i[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(n[0])-s[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(n[1])-s[1])),direction:o.dir}}var r=t.data(n),l=r.opt,d={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:l.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},o=e.extend(d,o),c=[o.dur,o.drag?0:o.dur],u=e("#mCSB_"+r.idx),h=e("#mCSB_"+r.idx+"_container"),g=h.parent(),f=l.callbacks.onTotalScrollOffset?V.call(t,l.callbacks.onTotalScrollOffset):[0,0],p=l.callbacks.onTotalScrollBackOffset?V.call(t,l.callbacks.onTotalScrollBackOffset):[0,0];if(r.trigger=o.trigger,(0!==g.scrollTop()||0!==g.scrollLeft())&&(e(".mCSB_"+r.idx+"_scrollbar").css("visibility","visible"),g.scrollTop(0).scrollLeft(0)),"_resetY"!==i||r.contentReset.y||(s("onOverflowYNone")&&l.callbacks.onOverflowYNone.call(t[0]),r.contentReset.y=1),"_resetX"!==i||r.contentReset.x||(s("onOverflowXNone")&&l.callbacks.onOverflowXNone.call(t[0]),r.contentReset.x=1),"_resetY"!==i&&"_resetX"!==i){switch(!r.contentReset.y&&t[0].mcs||!r.overflowed[0]||(s("onOverflowY")&&l.callbacks.onOverflowY.call(t[0]),r.contentReset.x=null),!r.contentReset.x&&t[0].mcs||!r.overflowed[1]||(s("onOverflowX")&&l.callbacks.onOverflowX.call(t[0]),r.contentReset.x=null),l.snapAmount&&(i=function(e,t,i){return Math.round(e/t)*t-i}(i,l.snapAmount,l.snapOffset)),o.dir){case"x":var v=e("#mCSB_"+r.idx+"_dragger_horizontal"),m="left",x=h[0].offsetLeft,S=[u.width()-h.outerWidth(!1),v.parent().width()-v.width()],w=[i,0===i?0:i/r.scrollRatio.x],b=f[1],C=p[1],y=b>0?b/r.scrollRatio.x:0,T=C>0?C/r.scrollRatio.x:0;break;case"y":var v=e("#mCSB_"+r.idx+"_dragger_vertical"),m="top",x=h[0].offsetTop,S=[u.height()-h.outerHeight(!1),v.parent().height()-v.height()],w=[i,0===i?0:i/r.scrollRatio.y],b=f[0],C=p[0],y=b>0?b/r.scrollRatio.y:0,T=C>0?C/r.scrollRatio.y:0}w[1]<0||0===w[0]&&0===w[1]?w=[0,0]:w[1]>=S[1]?w=[S[0],S[1]]:w[0]=-w[0],t[0].mcs||(a(),s("onInit")&&l.callbacks.onInit.call(t[0])),clearTimeout(h[0].onCompleteTimeout),(r.tweenRunning||!(0===x&&w[0]>=0||x===S[0]&&w[0]<=S[0]))&&(U(v[0],m,Math.round(w[1]),c[1],o.scrollEasing),U(h[0],m,Math.round(w[0]),c[0],o.scrollEasing,o.overwrite,{onStart:function(){o.callbacks&&o.onStart&&!r.tweenRunning&&(s("onScrollStart")&&(a(),l.callbacks.onScrollStart.call(t[0])),r.tweenRunning=!0,_(v),r.cbOffsets=[l.callbacks.alwaysTriggerOffsets||x>=S[0]+b,l.callbacks.alwaysTriggerOffsets||-C>=x])},onUpdate:function(){o.callbacks&&o.onUpdate&&s("whileScrolling")&&(a(),l.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(o.callbacks&&o.onComplete){"yx"===l.axis&&clearTimeout(h[0].onCompleteTimeout);var e=h[0].idleTimer||0;h[0].onCompleteTimeout=setTimeout(function(){s("onScroll")&&(a(),l.callbacks.onScroll.call(t[0])),s("onTotalScroll")&&w[1]>=S[1]-y&&r.cbOffsets[0]&&(a(),l.callbacks.onTotalScroll.call(t[0])),s("onTotalScrollBack")&&w[1]<=T&&r.cbOffsets[1]&&(a(),l.callbacks.onTotalScrollBack.call(t[0])),r.tweenRunning=!1,h[0].idleTimer=0,_(v,"hide")},e)}}}))}},U=function(e,t,i,n,o,s,a){function r(){x.stop||(p||u.call(),p=Q()-f,l(),p>=x.time&&(x.time=p>x.time?p+d-(p-x.time):p+d-1,x.time<p+1&&(x.time=p+1)),x.time<n?x.id=c(r):g.call())}function l(){n>0?(x.currVal=function(e,t,i,n,o){switch(o){case"linear":case"mcsLinear":return i*e/n+t;case"mcsLinearOut":return e/=n,e--,i*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return 1>(e/=n/2)?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t;case"easeInOutStrong":return 1>(e/=n/2)?i/2*Math.pow(2,10*(e-1))+t:(e--,i/2*(2-Math.pow(2,-10*e))+t);case"easeInOut":case"mcsEaseInOut":return 1>(e/=n/2)?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t;case"easeOutSmooth":return e/=n,-i*(--e*e*e*e-1)+t;case"easeOutStrong":return i*(1-Math.pow(2,-10*e/n))+t;case"easeOut":case"mcsEaseOut":default:var s=(e/=n)*e,a=s*e;return t+i*(.499999999999997*a*s+-2.5*s*s+5.5*a+-6.5*s+4*e)}}(x.time,v,S,n,o),m[t]=Math.round(x.currVal)+"px"):m[t]=i+"px",h.call()}e._mTween||(e._mTween={top:{},left:{}});var d,c,a=a||{},u=a.onStart||function(){},h=a.onUpdate||function(){},g=a.onComplete||function(){},f=Q(),p=0,v=e.offsetTop,m=e.style,x=e._mTween[t];"left"===t&&(v=e.offsetLeft);var S=i-v;x.stop=0,"none"!==s&&null!=x.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(x.id):clearTimeout(x.id),x.id=null),d=1e3/60,x.time=p+d,c=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return l(),setTimeout(e,.01)},x.id=c(r)},Q=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},K=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],i=0;i<t.length;i++){var n=t[i];e._mTween[n].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[n].id):clearTimeout(e._mTween[n].id),e._mTween[n].id=null,e._mTween[n].stop=1)}},Z=function(e,t){try{delete e[t]}catch(i){e[t]=null}},G=function(e){return!(e.which&&1!==e.which)},J=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ee=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},te=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]};e.fn[i]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[i]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[i].defaults=s,window[i]=!0,e(window).load(function(){e(o)[i](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var i,n,o=e(t),s=o.parents(".mCSB_container");return s.length?(i=s.parent(),(n=[s[0].offsetTop,s[0].offsetLeft])[0]+te(o)[0]>=0&&n[0]+te(o)[0]<i.height()-o.outerHeight(!1)&&n[1]+te(o)[1]>=0&&n[1]+te(o)[1]<i.width()-o.outerWidth(!1)):void 0},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var i=e(t).data(n);return i?i.overflowed[0]||i.overflowed[1]:void 0}})})}()}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(e){"use strict";function t(i,n){var o=function(){},s=this,a={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:t.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:o,onSearchComplete:o,onSearchError:o,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,i){return-1!==e.value.toLowerCase().indexOf(i)},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1,position:"absolute",customClass:""};s.element=i,s.el=e(i),s.suggestions=[],s.badQueries=[],s.selectedIndex=-1,s.currentValue=s.element.value,s.intervalId=0,s.cachedResponse={},s.onChangeInterval=null,s.onChange=null,s.isLocal=!1,s.suggestionsContainer=null,s.noSuggestionsContainer=null,s.options=e.extend({},a,n),s.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},s.hint=null,s.hintValue="",s.selection=null,void 0===n.width&&(n.width=e(i).outerWidth()),s.initialize(),s.setOptions(n)}var i={escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}},n=27,o=9,s=13,a=38,r=39,l=40;t.utils=i,e.Autocomplete=t,t.formatResult=function(e,t){var n=e.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),o="("+i.escapeRegExChars(t)+")";return n.replace(new RegExp(o,"gi"),"<strong>$1</strong>")},t.prototype={killerFn:null,initialize:function(){var i,n=this,o="."+n.classes.suggestion,s=n.classes.selected,a=n.options;n.element.setAttribute("autocomplete","off"),n.killerFn=function(t){0===e(t.target).closest("."+n.options.containerClass).length&&(n.killSuggestions(),n.disableKillerFn())},n.noSuggestionsContainer=e('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),n.suggestionsContainer=t.utils.createNode(a.containerClass),(i=e(n.suggestionsContainer)).appendTo(a.appendTo),"auto"!==a.width&&i.width(a.width),i.on("mouseover.autocomplete",o,function(){n.activate(e(this).data("index"))}),i.on("mouseout.autocomplete",function(){n.selectedIndex=-1,i.children("."+s).removeClass(s)}),i.on("click.autocomplete",o,function(){n.select(e(this).data("index"))}),n.fixPositionCapture=function(){n.visible&&n.fixPosition()},e(window).on("resize.autocomplete",n.fixPositionCapture),n.el.on("keydown.autocomplete",function(e){n.onKeyPress(e)}),n.el.on("keyup.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("blur.autocomplete",function(){n.onBlur()}),n.el.on("focus.autocomplete",function(){n.onFocus()}),n.el.on("change.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("input.autocomplete",function(e){n.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),0===e.options.minChars&&0===e.el.val().length&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(t){var i=this,n=i.options;e.extend(n,t),i.isLocal=e.isArray(n.lookup),i.isLocal&&(n.lookup=i.verifySuggestionsFormat(n.lookup)),n.orientation=i.validateOrientation(n.orientation,"bottom"),e(i.suggestionsContainer).css({"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex,position:n.position}),""!==n.customClass&&e(i.suggestionsContainer).addClass(n.customClass)},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearInterval(e.onChangeInterval),e.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,i=e(t.suggestionsContainer),n=i.parent().get(0);if(n===document.body||t.options.forceFixPosition){var o=t.options.orientation,s=i.outerHeight(),a=t.el.outerHeight(),r=t.el.offset(),l={top:r.top,left:r.left};if("auto"===o){var d=e(window).height(),c=e(window).scrollTop(),u=-c+r.top-s,h=c+d-(r.top+a+s);o=Math.max(u,h)===u?"top":"bottom"}if(l.top+="top"===o?-s:a,n!==document.body){var g,f=i.css("opacity");t.visible||i.css("opacity",0).show(),g=i.offsetParent().offset(),l.top-=g.top,l.left-=g.left,t.visible||i.css("opacity",f).hide()}"auto"===t.options.width&&(l.width=t.el.outerWidth()-2+"px"),i.css(l)}},enableKillerFn:function(){e(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){e(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.hide(),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this.el.val().length,i=this.element.selectionStart;return"number"==typeof i?i===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==l||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case n:t.el.val(t.currentValue),t.hide();break;case r:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case o:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case s:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case a:t.moveUp();break;case l:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case a:case l:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var t=this,i=t.options,n=t.el.val(),o=t.getQuery(n);return t.selection&&t.currentValue!==o&&(t.selection=null,(i.onInvalidateSelection||e.noop).call(t.element)),clearInterval(t.onChangeInterval),t.currentValue=n,t.selectedIndex=-1,i.triggerSelectOnValidInput&&t.isExactMatch(o)?void t.select(0):void(o.length<i.minChars?t.hide():t.getSuggestions(o))},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(t){var i,n=this.options.delimiter;return n?(i=t.split(n),e.trim(i[i.length-1])):t},getSuggestionsLocal:function(t){var i,n=this.options,o=t.toLowerCase(),s=n.lookupFilter,a=parseInt(n.lookupLimit,10);return i={suggestions:e.grep(n.lookup,function(e){return s(e,t,o)})},a&&i.suggestions.length>a&&(i.suggestions=i.suggestions.slice(0,a)),i},getSuggestions:function(t){var i,n,o,s,a=this,r=a.options,l=r.serviceUrl;if(r.params[r.paramName]=t,n=r.ignoreParams?null:r.params,!1!==r.onSearchStart.call(a.element,r.params)){if(e.isFunction(r.lookup))return void r.lookup(t,function(e){a.suggestions=e.suggestions,a.suggest(),r.onSearchComplete.call(a.element,t,e.suggestions)});a.isLocal?i=a.getSuggestionsLocal(t):(e.isFunction(l)&&(l=l.call(a.element,t)),o=l+"?"+e.param(n||{}),i=a.cachedResponse[o]),i&&e.isArray(i.suggestions)?(a.suggestions=i.suggestions,a.suggest(),r.onSearchComplete.call(a.element,t,i.suggestions)):a.isBadQuery(t)?r.onSearchComplete.call(a.element,t,[]):(a.abortAjax(),s={url:l,data:n,type:r.type,dataType:r.dataType},e.extend(s,r.ajaxSettings),a.currentRequest=e.ajax(s).done(function(e){var i;a.currentRequest=null,i=r.transformResult(e,t),a.processResponse(i,t,o),r.onSearchComplete.call(a.element,t,i.suggestions)}).fail(function(e,i,n){r.onSearchError.call(a.element,t,e,i,n)}))}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(0===e.indexOf(t[i]))return!0;return!1},hide:function(){var t=this,i=e(t.suggestionsContainer);e.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,i),t.visible=!1,t.selectedIndex=-1,clearInterval(t.onChangeInterval),e(t.suggestionsContainer).hide(),t.signalHint(null)},suggest:function(){if(0!==this.suggestions.length){var t,i=this,n=i.options,o=n.groupBy,s=n.formatResult,a=i.getQuery(i.currentValue),r=i.classes.suggestion,l=i.classes.selected,d=e(i.suggestionsContainer),c=e(i.noSuggestionsContainer),u=n.beforeRender,h="",g=function(e,i){var n=e.data[o];return t===n?"":'<div class="autocomplete-group"><strong>'+(t=n)+"</strong></div>"};return n.triggerSelectOnValidInput&&i.isExactMatch(a)?void i.select(0):(e.each(i.suggestions,function(e,t){o&&(h+=g(t,0)),h+='<div class="'+r+'" data-index="'+e+'">'+s(t,a)+"</div>"}),this.adjustContainerWidth(),c.detach(),d.html(h),e.isFunction(u)&&u.call(i.element,d),i.fixPosition(),d.show(),n.autoSelectFirst&&(i.selectedIndex=0,d.scrollTop(0),d.children("."+r).first().addClass(l)),i.visible=!0,void i.findBestHint())}this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var t=this,i=e(t.suggestionsContainer),n=e(t.noSuggestionsContainer);this.adjustContainerWidth(),n.detach(),i.empty(),i.append(n),t.fixPosition(),i.show(),t.visible=!0},adjustContainerWidth:function(){var t,i=this,n=i.options,o=e(i.suggestionsContainer);"auto"===n.width&&(t=i.el.outerWidth()-2,o.width(t>0?t:300))},findBestHint:function(){var t=this,i=t.el.val().toLowerCase(),n=null;i&&(e.each(t.suggestions,function(e,t){var o=0===t.value.toLowerCase().indexOf(i);return o&&(n=t),!o}),t.signalHint(n))},signalHint:function(t){var i="",n=this;t&&(i=n.currentValue+t.value.substr(n.currentValue.length)),n.hintValue!==i&&(n.hintValue=i,n.hint=t,(this.options.onHint||e.noop)(i))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,function(e){return{value:e,data:null}}):t},validateOrientation:function(t,i){return t=e.trim(t||"").toLowerCase(),-1===e.inArray(t,["auto","bottom","top"])&&(t=i),t},processResponse:function(e,t,i){var n=this,o=n.options;e.suggestions=n.verifySuggestionsFormat(e.suggestions),o.noCache||(n.cachedResponse[i]=e,o.preventBadQueries&&0===e.suggestions.length&&n.badQueries.push(t)),t===n.getQuery(n.currentValue)&&(n.suggestions=e.suggestions,n.suggest())},activate:function(t){var i,n=this,o=n.classes.selected,s=e(n.suggestionsContainer),a=s.find("."+n.classes.suggestion);return s.find("."+o).removeClass(o),n.selectedIndex=t,-1!==n.selectedIndex&&a.length>n.selectedIndex?(i=a.get(n.selectedIndex),e(i).addClass(o),i):null},selectHint:function(){var t=this,i=e.inArray(t.hint,t.suggestions);t.select(i)},select:function(e){this.hide(),this.onSelect(e)},moveUp:function(){var t=this;if(-1!==t.selectedIndex)return 0===t.selectedIndex?(e(t.suggestionsContainer).children().first().removeClass(t.classes.selected),t.selectedIndex=-1,t.el.val(t.currentValue),void t.findBestHint()):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;e.selectedIndex!==e.suggestions.length-1&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var i=this,n=i.activate(t);if(n){var o,s,a,r=e(n).outerHeight();o=n.offsetTop,a=(s=e(i.suggestionsContainer).scrollTop())+i.options.maxHeight-r,s>o?e(i.suggestionsContainer).scrollTop(o):o>a&&e(i.suggestionsContainer).scrollTop(o-i.options.maxHeight+r),i.options.preserveInput||i.el.val(i.getValue(i.suggestions[t].value)),i.signalHint(null)}},onSelect:function(t){var i=this,n=i.options.onSelect,o=i.suggestions[t];i.currentValue=i.getValue(o.value),i.currentValue===i.el.val()||i.options.preserveInput||i.el.val(i.currentValue),i.signalHint(null),i.suggestions=[],i.selection=o,e.isFunction(n)&&n.call(i.element,o)},getValue:function(e){var t,i,n=this.options.delimiter;return n?1===(i=(t=this.currentValue).split(n)).length?e:t.substr(0,t.length-i[i.length-1].length)+e:e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),t.disableKillerFn(),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.autocomplete=e.fn.devbridgeAutocomplete=function(i,n){var o="autocomplete";return 0===arguments.length?this.first().data(o):this.each(function(){var s=e(this),a=s.data(o);"string"==typeof i?a&&"function"==typeof a[i]&&a[i](n):(a&&a.dispose&&a.dispose(),a=new t(this,i),s.data(o,a))})}});
